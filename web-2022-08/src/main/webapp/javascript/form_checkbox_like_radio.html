<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Checkbox2</title>
	
	</head>
	<body>
		<form name = 'frm' method='post'>
			<table border = 0>
				<th>마음에 드는 연예인을 고르시오</th>
				<tr>
					<td>
						<textarea name=re rows=5 cols=30></textarea>
					</td>
				</tr>
				<tr>
					<td>
						<label><input type='checkbox' name=chk value='티아라'>티아라</label>
						<label><input type='checkbox' name=chk value='소녀시대'>소녀시대</label>
						<label><input type='checkbox' name=chk value='황신혜'>황신혜</label>
						<label><input type='checkbox' name=chk value='김미화'>김미화</label><br/>
						<label><input type='checkbox' name=chk value='이영자'>이영자</label>
						<label><input type='checkbox' name=chk value='고두심'>고두심</label>
						<label><input type='checkbox' name=chk value='신지'>신지</label><br/>
						<label><input type = button name=bu value='선택' onclick="mclick(this.form)"></label>
						<input type=reset value='취소'>
						
					</td>
				</tr>
			</table>
		</form>
			<script>
		//window.onload = function(){} 이 안에 다 넣어야 나중에 됨		
		
			let str = '';	//선언한거야		
			let chks=[]; //storage에 저장될 값이나 저장한 값을 저장하는 배열 변수
			
			//sessionStorage에 있는 값을 사용하여 현재 페이지의 초기값으로 설정
			let temp = sessionStorage.getItem('chks');
			let frm = document.frm;
			if(temp!=null){
				chks = temp.split(',');
				for(v of chks){
					for(tag of frm.chk){
						if(tag.value==v){
							tag.checked=true;
							str += tag.value + '\n';
							break;
						}
					}
				}
				frm.re.value = str;
			}
			
			
			function mclick(frm){
				str = '';	//사용한거야 위랑 다르다.
				for(tag of frm.chk /* 배열이다 */){
					if(tag.checked){
						str += tag.value + '\n';
						chks.push(tag.value);
					}
				}
				frm.re.value = str;
				sessionStorage.setItem('chks', chks); //어차피 문자열로 들어간다.
			}		
		
		</script>
	</body>
</html>